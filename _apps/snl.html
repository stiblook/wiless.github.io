---
layout: wide
title: SNL Spectrum Viewer
---

<link href="/static/jsoneditor.css" rel="stylesheet" type="text/css">
<script src="/static/jsoneditor.js"></script>
<script async defer src="/static/json-formatter.umd.js" charset="UTF-8"></script>
<style>
.json-formatter-row .json-formatter-string,
.json-formatter-row .json-formatter-stringifiable{
	color: teal;
	white-space: normal;
	word-wrap: break-word;
	}
</style>
    
    <div class="ui teal label"> 
                        <i class="paint brush icon"></i> 
                        Theme
                        <select class="ui teal dropdown" id="theme"> </select>
                      </div>


    <div class="card bg-primary text-white">
	    <div id="view" class="column card-body bg-light text-dark"></div>
	    <button class="ui float right teal button" name="saveButton" onclick="UpdatePlot()">Update </button>	     
	    <div class="column card-body bg-light text-dark" id="vegaspec"> </div>
	    <div class="card-body bg-light text-dark" id="data"> </div>
	    <div class="column card-body bg-light text-dark" id="vegadata"> </div>
    </div>
<div class="ui divider"></div>  
   
                <div id="output" style="height: 500px;background-color: rgba(202, 244, 247);"> </div>
            </div>
 
<script>
	
	 function CallPlots() {
        vegaspec = ploteditor.get();


        // optional argument passed to Vega-Embed to specify Vega-Lite spec. More info at https://github.com/vega/vega-embed
        var opt = {
            "mode": "vega-lite"
        };

        // Embed the visualization in the container with id `vis`
        vegaEmbed("#view", vegaspec, opt).then(function (result) {
            // Callback receiving the View instance and parsed Vega spec
            // result.view is the View, which resides under the '#vis' element
        }).catch(console.warn);


    }

	
function UpdatePlot() {
        el = document.getElementById('output');
        //  editor = new JSONEditor(el, {mode:'view',modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], maxVisibleChilds:25}, objspec);
        themename = document.getElementById("theme").value;
        var objspec = editor.get();
   //     var id_token = guser.getAuthResponse().id_token;
    //    myHeaders.set('Authorization', 'Bearer ' + id_token);
      //  const myloader = { http: { headers: myHeaders } };
      
      
      vegaEmbed('#vis2', objspec, { renderer: "canvas", "loader": myloader, "actions": { "export": true, "source": false, "compiled": false, "editor": false }, "theme": themename, "downloadFileName": "ISRO Frequency", patch: (s) => {
	      
//         vegaEmbed('#vis2', objspec, { renderer: "canvas", "loader": myloader, "actions": { "export": true, "source": false, "compiled": false, "editor": false }, "theme": themename, "downloadFileName": "ISRO Frequency", patch: (s) => {
         
         s.signals.push({
 "name": "barClick",
 "value": 0,
 
 "on": [  {"events": "rect:mousedown", "encode": "select"},
{"events": "rect:mouseup", "encode": "release"} ]
});

         console.log("patch function is ",s);
         return s;                 
     } })
     .then(function (result) {
         // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
         console.log("Vega Embed result ", result);
         console.log("Vega View ", result.view);
         vegaview = result.view;
         vegaview.addSignalListener('barClick', myListener);
     }).catch(console.error);

    //    vegaEmbed('#vis2', objspec, { "loader": myloader, "actions": { "export": true, "source": false, "compiled": false, "editor": false }, "theme": themename, "downloadFileName": "ISRO Frequency" });
    }
   
	  
 
    
  
</script>
