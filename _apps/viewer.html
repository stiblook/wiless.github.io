---
layout: wide
title: API logger
---

<link href="/static/jsoneditor.css" rel="stylesheet" type="text/css">
<script src="/static/jsoneditor.js"></script>
<script async defer src="/static/json-formatter.umd.js" charset="UTF-8"></script>

<script src="/static/api.js"></script>


    
  
    <div class="card bg-primary text-white">
        <div class="card-header">File Pick 
            <input type="file" name="inputfile"  id="inputfile"> 
        </div>
        <div class="card-body bg-light text-dark" id="output"> </div>
    </div>
    <hr>
  <button type="button" onclick="helloclick()">Click</button>  
<div class="row">
    <div class="col-sm-6">
        <div id="APIresults" >
            API Output Responses
          </div>

    </div>
    <div class="col-sm-6">
    Output JSON Files
         <div id="column2" >
            API Output Responses
          </div>
    </div>
    
    
    
    </div>

<script>
var globalcounter=0;
  document.getElementById('inputfile') 
            .addEventListener('change', function() { 
              
            var fr=new FileReader(); 
            fr.onload=function(){ 
              el=document.getElementById('output') ;
                
                        // el.textContent=fr.result; 
                        json=JSON.parse(fr.result);

                        const editor = new JSONEditor(el, {mode:'view',maxVisibleChilds:25}, json);

            }               
            fr.readAsText(this.files[0]); 
        });

 

    
    function helloclick() {
    globalcounter++;
  
  const options = {
    mode: 'view',
           modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], // allowed modes
maxVisibleChilds:25
  }

   const apiname="hexgrid";
    wiless.APIcalls(apiname).then(d => {
      const myJSON = d;

      // Add all fancy boxes
      elem = document.getElementById("APIresults");
      card=document.createElement("div");
      elem.appendChild(card);
      h3=document.createElement("h4");
      h3.appendChild(document.createTextNode(globalcounter+": "+apiname));
      btn=document.createElement("button");
      btn.setAttribute("type","button");
      btn.innerHTML=` <span aria-hidden="true">&times;</span>`;
      btn.classList.add("close");
      btn.onclick=function(e){e.target.parentElement.parentElement.remove();};
      card.appendChild(btn);
      card.appendChild(h3);      
      jsoneditor=document.createElement("div");
      card.appendChild(jsoneditor);
      card.classList.add("shadow","p-3","mb-5", "bg-white", "rounded");

      const editor = new JSONEditor(jsoneditor, options, myJSON);
// Do the same in the second column 
      const JFoptions=    {
  hoverPreviewEnabled: true,
  hoverPreviewArrayCount: 10,
  hoverPreviewFieldCount: 2,
  // theme: 'dark',
  animateOpen: false,
  animateClose: false,
  useToJSON: true
}

     // Add all fancy boxes
      elem = document.getElementById("column2");
      card=document.createElement("div");
      elem.appendChild(card);
      h3=document.createElement("h4");
      h3.appendChild(document.createTextNode(globalcounter+": "+apiname));
      btn=document.createElement("button");
      btn.setAttribute("type","button");
      btn.innerHTML=` <span aria-hidden="true">&times;</span>`;
      btn.classList.add("close");
      btn.onclick=function(e){e.target.parentElement.parentElement.remove();};
      card.appendChild(btn);
      card.appendChild(h3);      
      card.classList.add("shadow","p-3","mb-5", "bg-white", "rounded");

      
        
        
        
      const formatter = new JSONFormatter(myJSON,1,JFoptions);
      card.appendChild(formatter.render());    

      return;
    }
    );
  }
  
</script>
